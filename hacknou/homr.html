<!DOCTYPE html>
<link rel="stylesheet" href="home.css">
<html>
<head>
  <meta charset="UTF-8">
  <title>My Angular App</title>
</head>
<body>
<div class="container">
    <div class="background-image-container">
        <!-- Content goes here -->
      
        <aside class="challenges">
            <h2>Daily Challenges font-family: 'Reddit Mono'</h2>
            <ul id="challenge-list">
            <!-- Populate with dynamic content if available -->
            <li><a href="#" class="resource-1-link">Plant a tree</a></li>
            <li><a href="#"  class="resource-1-link">Recyle a bottle</a></li>
            <li><a href="#"  class="resource-1-link">Use public transportation today</a></li>
            <!-- More resources -->
            </ul>
        </aside>
        <script>
            function addListElements() {
            
                const jsonData = {
    longitude: 44.2415,
    latitude: 14.9023
};

// Define the URL of your backend API endpoint
const url = 'http://localhost:8080/challenges/all';

// Define the options for the fetch request
const options = {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(jsonData) // Convert JSON object to a string
};

// Send the POST request using fetch
fetch(url, options)
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json(); // Parse the JSON response
    })
    .then(data => {
        // Handle the JSON response data
        console.log('Response received:', data);
        var list = document.getElementById("challenge-list");
        for (var i = 0; i < data.length; i++) {
            var item = document.createElement("li");
            var article_inside = document.createElement("a");
            article_inside.href = '#';
            article_inside.innerHTML = data[i].title;
            article_inside.className = 'resource-1-link';
            item.appendChild(article_inside);
            list.appendChild(item);            
        }
    })
    .catch(error => {
        // Handle errors
        console.error('There was a problem with the fetch operation:', error);
    });


            // var list = document.getElementById("challenge-list");
            // for (var i = 0; i < 5; i++) {
            //     var item = document.createElement("li");
            //     item.innerHTML = "New list item";
            //     list.appendChild(item);            
            // }

        }
            window.onload = addListElements;

            // addListElement(); // Calling the function when the page loads
        </script>
  <!-- Clickable username that triggers the sidebar -->
  <div class="sidebar-toggle" onclick="toggleSidebar()">lauratrandafir2001</div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
        <span class="username" onclick="closeSidebar()">lauratrandafir2001</span>
        </div>
        <nav class="sidebar-nav">
        <ul>
            <li><a href="#"><i class="fas fa-user-circle"></i>Your profile</a></li>
            <li><a href="#"><i class="fas fa-code-branch"></i>Vouchers earned</a></li>
            <li><a href="#"><i class="fas fa-users"></i>Partner Companies</a></li>
            <li><a href="#"><i class="fas fa-book"></i>Educational resources</a></li>
            <!-- Add other sidebar items here -->
        </ul>
        </nav>
    </aside>
  <script src="./home.js"></script>
</div>
    </div>
    </section> 
    </div>
<button id="myBtn"  onclick="openModal()">Open Modal</button>
<div id="myModal" class="modal">
    <div class="modal-content">
        <head>
            <title>Click to Get Location with Google Maps</title>
            <style>
                /* Style the map */
                #map {
                    height: 400px;
                    width: 100%;
                }
            </style>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZkdFQWekX-zhWncrJ3tar8Hwi9RBodcU&callback=initMap" async defer></script>
            <script>
                let map;

                function initMap() {
                    map = new google.maps.Map(document.getElementById('map'), {
                        center: {lat: -34.397, lng: 150.644},
                        zoom: 8
                    });

                    // This event listener will call the function when the map is clicked.
                    map.addListener('click', function(e) {
                        placeMarkerAndPanTo(e.latLng, map);
                    });
                }

                function placeMarkerAndPanTo(latLng, map) {
                    new google.maps.Marker({
                        position: latLng,
                        map: map
                    });
                    map.panTo(latLng);

                    // Log the location to the console or display it on the page
                    console.log(`Latitude: ${latLng.lat()}, Longitude: ${latLng.lng()}`);
                    closeModal();
                    alert(`Latitude: ${latLng.lat()}, Longitude: ${latLng.lng()}`);
                   
                }
            </script>
        </head>
        <body>
            <div id="map"></div>
        </body>
    </div>
</div>

</body>
</html>
